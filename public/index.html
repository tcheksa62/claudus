<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claudus - Word Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>CLAUDUS</h1>
            <p class="subtitle">Devinez le mot!</p>
        </header>

        <div id="menu-screen" class="screen active">
            <div class="menu-options">
                <button class="menu-btn" onclick="startWordOfTheDay()">
                    ğŸ“… Mot du Jour
                </button>
                <button class="menu-btn" onclick="showSoloConfig()">
                    ğŸ® Solo
                </button>
                <button class="menu-btn" onclick="showMultiplayerLobby()">
                    ğŸ‘¥ Multijoueur
                </button>
            </div>
        </div>

        <div id="solo-config-screen" class="screen">
            <h2>Configuration Solo</h2>
            <div class="config-form">
                <label for="solo-pseudo">Pseudo:</label>
                <input type="text" id="solo-pseudo" placeholder="Votre pseudo" maxlength="15">

                <label for="word-length">Longueur du mot:</label>
                <select id="word-length">
                    <option value="6" selected>6 lettres</option>
                    <option value="7">7 lettres</option>
                    <option value="8">8 lettres</option>
                    <option value="9">9 lettres</option>
                    <option value="10">10 lettres</option>
                </select>

                <button class="btn-primary" onclick="startSoloGame()">DÃ©marrer</button>
                <button class="btn-secondary" onclick="showMenu()">Retour</button>
            </div>
        </div>

        <div id="multiplayer-lobby-screen" class="screen">
            <div class="lobby-header">
                <h2>ğŸ‘¥ Multijoueur</h2>
                <p class="lobby-subtitle">Jouez avec vos amis en temps rÃ©el</p>
            </div>

            <div class="lobby-pseudo-section">
                <label for="lobby-pseudo">Votre pseudo</label>
                <input type="text" id="lobby-pseudo" placeholder="Entrez votre pseudo..." maxlength="15">
            </div>

            <div class="lobby-cards">
                <div class="lobby-card create-card">
                    <div class="lobby-card-icon">ğŸ®</div>
                    <h3>CrÃ©er une partie</h3>

                    <div class="lobby-card-content">
                        <div class="config-row">
                            <label for="mp-word-count">Nombre de mots</label>
                            <div class="word-count-selector">
                                <button class="count-btn" onclick="adjustWordCount(-1)">âˆ’</button>
                                <span id="word-count-display">3</span>
                                <button class="count-btn" onclick="adjustWordCount(1)">+</button>
                            </div>
                            <input type="hidden" id="mp-word-count" value="3">
                        </div>

                        <div class="config-row">
                            <label for="mp-word-length-mode">Longueur des mots</label>
                            <select id="mp-word-length-mode">
                                <option value="random">ğŸ² AlÃ©atoire</option>
                                <option value="progressive">ğŸ“ˆ Progressif (6â†’10)</option>
                                <option value="fixed-6">6 lettres</option>
                                <option value="fixed-7">7 lettres</option>
                                <option value="fixed-8">8 lettres</option>
                            </select>
                        </div>

                        <button class="btn-primary btn-full" onclick="createSession()">
                            CrÃ©er la partie
                        </button>
                    </div>
                </div>

                <div class="lobby-card join-card">
                    <div class="lobby-card-icon">ğŸš€</div>
                    <h3>Rejoindre</h3>

                    <div class="lobby-card-content">
                        <div class="config-row">
                            <label for="session-id-input">Code de session</label>
                            <input type="text" id="session-id-input" placeholder="ABC123" maxlength="6" class="session-code-input">
                        </div>

                        <button class="btn-primary btn-full" onclick="joinSession()">
                            Rejoindre la partie
                        </button>
                    </div>
                </div>
            </div>

            <button class="btn-secondary btn-back" onclick="showMenu()">â† Retour au menu</button>
        </div>

        <div id="waiting-room-screen" class="screen">
            <div class="waiting-room-header">
                <h2>â³ Salle d'attente</h2>
            </div>

            <div class="session-share-box">
                <div class="session-code-big">
                    <span class="session-label">Code de la partie</span>
                    <strong id="session-code-display"></strong>
                </div>
                <button class="btn-copy-big" onclick="copySessionLink()">
                    ğŸ“‹ Copier le lien d'invitation
                </button>
            </div>

            <div id="game-config-display" class="game-config-box"></div>

            <div class="players-section">
                <h3>ğŸ‘¥ Joueurs (<span id="player-count">0</span>)</h3>
                <div id="players-container" class="players-grid"></div>
            </div>

            <div id="admin-controls" class="admin-section" style="display: none;">
                <div class="admin-badge">ğŸ‘‘ Vous Ãªtes l'hÃ´te</div>
                <button class="btn-start-game" onclick="startMultiplayerGame()">
                    ğŸ® Lancer la partie
                </button>
            </div>

            <div id="waiting-message" class="waiting-section" style="display: none;">
                <div class="waiting-animation">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
                <p class="waiting-text">En attente du lancement par l'hÃ´te...</p>
            </div>

            <button class="btn-secondary btn-leave" onclick="leaveSession()">â† Quitter la partie</button>
        </div>

        <div id="game-screen" class="screen">
            <div class="game-layout">
                <div id="multiplayer-live-view" class="multiplayer-live-view" style="display: none;">
                    <h3>ğŸ® Joueurs en direct</h3>
                    <div id="live-players-container"></div>
                </div>

                <div class="game-main">
                    <div class="game-header">
                        <div class="game-info">
                            <span id="player-name"></span>
                            <span id="game-mode"></span>
                        </div>
                        <button class="btn-secondary btn-quit" onclick="quitGame()">Quitter</button>
                    </div>

                    <div class="word-info">
                        <div id="word-hint">Longueur: <strong id="first-letter"></strong> lettres</div>
                        <div id="attempts">Tentatives: <span id="attempt-count">0</span>/6</div>
                    </div>

                    <div id="message-box" class="message-box"></div>

                    <div id="game-board"></div>

                    <div class="game-instructions">
                        Tapez votre mot et appuyez sur EntrÃ©e pour valider
                    </div>

                    <div id="keyboard" class="keyboard">
                <div class="keyboard-row">
                    <button class="key">A</button>
                    <button class="key">Z</button>
                    <button class="key">E</button>
                    <button class="key">R</button>
                    <button class="key">T</button>
                    <button class="key">Y</button>
                    <button class="key">U</button>
                    <button class="key">I</button>
                    <button class="key">O</button>
                    <button class="key">P</button>
                </div>
                <div class="keyboard-row">
                    <button class="key">Q</button>
                    <button class="key">S</button>
                    <button class="key">D</button>
                    <button class="key">F</button>
                    <button class="key">G</button>
                    <button class="key">H</button>
                    <button class="key">J</button>
                    <button class="key">K</button>
                    <button class="key">L</button>
                    <button class="key">M</button>
                </div>
                <div class="keyboard-row">
                    <button class="key key-action" onclick="handleKeyboardEnter()">ENTRÃ‰E</button>
                    <button class="key">W</button>
                    <button class="key">X</button>
                    <button class="key">C</button>
                    <button class="key">V</button>
                    <button class="key">B</button>
                    <button class="key">N</button>
                    <button class="key key-action" onclick="handleKeyboardBackspace()">âŒ«</button>
                </div>
                    </div>
                </div>

                <div id="word-history-panel" class="word-history-panel" style="display: none;">
                    <h3>ğŸ“œ Historique</h3>
                    <div id="word-history-container"></div>
                </div>
            </div>
        </div>

        <div id="result-screen" class="screen">
            <div class="result-content">
                <h2 id="result-title"></h2>
                <div id="result-stats"></div>
                <div class="result-buttons">
                    <button class="btn-primary" onclick="showMenu()">Menu Principal</button>
                    <button class="btn-secondary" onclick="playAgain()">Rejouer</button>
                </div>
            </div>
        </div>

        <div id="post-game-lobby-screen" class="screen">
            <h2>ğŸ† Partie TerminÃ©e</h2>

            <div class="leaderboard-container">
                <h3>Classement</h3>
                <div id="leaderboard"></div>
            </div>

            <div class="replay-section">
                <h3>Revoir les parties</h3>
                <div id="player-replay-selector"></div>
                <div id="replay-viewer"></div>
            </div>

            <div class="post-game-buttons">
                <button class="btn-primary btn-large" onclick="returnToLobby()">ğŸ”™ Retour au lobby</button>
                <button class="btn-secondary" onclick="showMenu()">Menu Principal</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>
